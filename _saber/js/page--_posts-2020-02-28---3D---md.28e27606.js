(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{60:function(e,n,t){"use strict";t.r(n);var a=t(0),r=function(e){var n,t,a,r,o,i,s,l=(a=void 0,r="简易3D模型",o="遇到问题",i="可行方案",s="实现细节",(n={}).type=t="post",n.internal=a,n.contentType="markdown",n.slug=r,n.content=a,n.createdAt=new Date(16144704e5),n.updatedAt=new Date(1615110011149),n.title=r,n.date="2021-02-28",n.layout=t,n.markdownHeadings=[{text:o,slug:o,level:2},{text:i,slug:i,level:2},{text:s,slug:s,level:2},{text:"总结",slug:"总结",level:2}],n.excerpt="<p>年前兴起了酒包装定制的热潮，公司也有个相关项目，其中，需要一个页面来展示酒盒定制后的3D旋转模型。效果图如下：</p>\n",n.permalink="/2021/02/28/简易3D模型",n.assets={},n.attributes=n,n.prevPost={title:"音频播放控制",permalink:"/2021/02/25/音频播放"},n.nextPost={title:"跳转第三方App",permalink:"/2021/03/07/跳转第三方App"},n),d=e.options.beforeCreate||[];e.options.beforeCreate=[function(){this.$page=l}].concat(d);["layout","transition"].forEach((function(n){var t=e.options.PageComponent;t&&(e.options[n]=t[n]),void 0===e.options[n]&&(e.options[n]=l[n])})),l.slug&&(e.options.name="page-wrapper-"+l.slug.replace(/[^0-9a-z\-]/gi,"-"))},o=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("layout-manager",[t("h2",{attrs:{id:"遇到问题"}},[e._v("遇到问题")]),e._v(" "),t("p",[e._v("年前兴起了酒包装定制的热潮，公司也有个相关项目，其中，需要一个页面来展示酒盒定制后的3D旋转模型。效果图如下：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://ls-img-store.oss-cn-qingdao.aliyuncs.com/img/box3dDemo.gif",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"可行方案"}},[e._v("可行方案")]),e._v(" "),t("p",[e._v("由于页面需要的只是一个拥有包装图案的简单立方体，没必要建模，仅通过"),t("code",{pre:!0},[e._v("three.js")]),e._v("自带的模型即可解决。虽然之前没有接触过"),t("code",{pre:!0},[e._v("three.js")]),e._v("，但上手还算容易，通过调整"),t("saber-link",{attrs:{to:"http://www.webgl3d.cn/Three.js/"}},[e._v("案例")]),e._v("中的一些参数即可实现需要的效果。")],1),e._v(" "),t("h2",{attrs:{id:"实现细节"}},[e._v("实现细节")]),e._v(" "),t("p",[e._v("使用"),t("code",{pre:!0},[e._v("three.js")]),e._v("通过内置模型实现效果，一般需要以下几步：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://ls-img-store.oss-cn-qingdao.aliyuncs.com/img/image-20210307154645717.png",alt:"image-20210307154645717"}})]),e._v(" "),t("p",[e._v("关键代码如下：")]),e._v(" "),t("div",{pre:!0,attrs:{class:"saber-highlight","data-lang":"js"}},[t("pre",{pre:!0,attrs:{class:"saber-highlight-code language-js"}},[t("code",{pre:!0,attrs:{class:"language-js"}},[e._v("boxModelLoad: function(boxImg){\n\n    /**\n\t* 创建场景对象Scene\n\t*/\n    var scene = new THREE.Scene();\n\n    // 由于模型大小并不确定，所以在长宽高中计算中最大值，然后其他两边按比例做小，以确保每个边都在屏幕显示范围之内\n    let norm = 336\n    let maxSize = this.boxModelSize[0]\n    let maxIndex = 0\n    for(let m in this.boxModelSize) {\n        if(Number(this.boxModelSize[m]) > maxSize) {\n            maxSize = Number(this.boxModelSize[m])\n            maxIndex = m\n        }\n    }\n    let propotion = norm /maxSize\n    for(let m in this.boxModelSize) {\n        if(maxIndex == m) this.boxModelSize[maxIndex] = norm\n        else {\n            this.boxModelSize[m] = propotion *this.boxModelSize[m]\n        }\n    }\n\n    /**\n\t * 创建网格模型\n\t * 创建一个立方体对象\n\t * 长宽高由上面计算得出\n\t */\n    var geometry = new THREE.BoxGeometry(this.boxModelSize[1], this.boxModelSize[2], this.boxModelSize[0]); \n\n    var mesh\n    var textureLoader = new THREE.TextureLoader();\n\n    /**\n\t * 准备材质对象\n\t * 立方体六个平面需要六个不同的图片\n\t */\n    // 前\n    var texture1 = textureLoader.load(boxImg);\n    var material_1 = new THREE.MeshLambertMaterial({\n        map: texture1, // 设置纹理贴图\n    });\n\n    // 后\n    var texture2 = textureLoader.load(this.boxModelBackLink ? this.boxModelBackLink: boxImg);\n    var material_2 = new THREE.MeshLambertMaterial({\n        map: texture2, // 设置纹理贴图\n    });\n\n    // 上\n    var texture3 = textureLoader.load(this.boxModelTopLink);\n    var material_3 = new THREE.MeshLambertMaterial({\n        map: texture3, // 设置纹理贴图\n    });\n\n    // 下\n    var texture4 = textureLoader.load('data:image/png;base64,iVBORw0KGgoAAkJggg==');\n    var material_4 = new THREE.MeshLambertMaterial({\n        map: texture4, // 设置纹理贴图\n    });\n\n    // 左\n    var texture5 = textureLoader.load(this.boxModelLeftLink);\n    var material_5 = new THREE.MeshLambertMaterial({\n        map: texture5, // 设置纹理贴图\n    });\n\n    // 右\n    var texture6 = textureLoader.load(this.boxModelRightLink);\n    var material_6 = new THREE.MeshLambertMaterial({\n        map: texture6, // 设置纹理贴图\n    });\n\n    var materialArr = [material_1, material_2, material_3, material_4, material_5, material_6]\n\n    //网格模型对象Mesh\n    mesh = new THREE.Mesh(geometry, materialArr); \n    //网格模型添加到场景中\n    scene.add(mesh); \n\n    /**\n\t * 光源位置\n\t * 分为点光源和环境光两种\n\t */\n\n    //点光源\n    // var point = new THREE.PointLight(0xaaaaaa);\n    // point.position.set(400, 160, 300); //点光源位置\n    // point.castShadow = true;            // default false\n    // scene.add(point); //点光源添加到场景中\n    //环境光\n    var ambient = new THREE.AmbientLight(0xffffff);\n    scene.add(ambient);\n\n    /**\n\t * 相机设置\n\t * 创建相机对象\n\t */\n\n    var width = window.innerWidth; //窗口宽度\n    var height = 350; //窗口高度\n    var k = width / height; //窗口宽高比\n    var s = 200; //三维场景显示范围控制系数，系数越大，显示的范围越大\n    //创建相机对象\n    var camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);\n    camera.position.set(900, 100, 100); //设置相机位置\n    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)\n\n    /**\n\t * 创建渲染器对象\n\t */\n    var renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true\n    });\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap\n    //设置canvas的像素比为当前设备的屏幕像素比，避免高分屏下模糊\n    renderer.setPixelRatio( window.devicePixelRatio );\n    renderer.setSize(width, height);//设置渲染区域尺寸\n    renderer.setClearColor(0xf8f8f8, 1); //设置背景颜色\n    //在需要的元素中插入canvas对象\n    document.getElementById('boxModel').appendChild(renderer.domElement); \n\n    /**\n\t * 执行渲染操作\n\t * 并添加旋转效果\n\t */\n    let T0 = new Date();//上次时间\n    function render() {\n        let T1 = new Date();//本次时间\n        let t = T1-T0;//时间差\n        T0 = T1;//把本次时间赋值给上次时间\n        requestAnimationFrame(render);\n        renderer.render(scene,camera);//执行渲染操作\n        mesh.rotateY(0.0005*t);//旋转角速度0.001弧度每毫秒\n    }\n    render();\n}")])])]),t("h2",{attrs:{id:"总结"}},[e._v("总结")]),e._v(" "),t("p",[t("code",{pre:!0},[e._v("three.js")]),e._v("还有许多其他功能，但是如果不是经常使用的话，也没有必要每个都去了解，大概浏览下功能，需要的时候再去挑着细看，也不失为一个提高效率的办法。")])])}),[],!1,null,null,null);"function"==typeof r&&r(o);n.default=o.exports}}]);